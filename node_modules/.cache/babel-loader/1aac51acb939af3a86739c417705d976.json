{"ast":null,"code":"import { useState, useEffect, useCallback } from 'react';\nexport const IS_NUMBER = \"IS_NUMBER\";\nexport const IS_UNKNOWN = \"IS_UNKNOWN\";\nexport const IS_INCOMPARABLE = \"IS_INCOMPARABLE\";\nexport const IS_STRING = \"IS_STRING\";\nexport const IS_COLOR = \"IS_COLOR\";\n\nconst useTransition = (from, to, seconds = 1, callback = () => null) => {\n  const cb = useCallback(() => callback(), [callback]);\n  return TransitionFactory(from, to, seconds, cb);\n};\n\nconst TransitionFactory = (from, to, seconds, callback) => {\n  const inputType = transitionType(from, to);\n  const cb = useCallback(() => callback(), [callback]);\n\n  switch (inputType) {\n    case IS_NUMBER:\n      return IncrementNumber(from, to, seconds, cb);\n\n    case IS_STRING:\n      return IncrementString(from, to, seconds, () => 0);\n\n    case IS_COLOR:\n      return IncrementColor(from, to, seconds, cb);\n\n    case IS_UNKNOWN:\n    case IS_INCOMPARABLE:\n    default:\n      return from;\n  }\n};\n\nconst IncrementNumber = (from, to, seconds, callback) => {\n  const cb = useCallback(() => callback(), [callback]);\n  return useIncrement(from, to, seconds, cb);\n};\n\nconst IncrementString = (from, to, seconds, callback) => {\n  const cb = useCallback(() => callback(), [callback]);\n  const fromLength = from.length;\n  const toLength = to.length;\n  return to.substring(from.Length, Math.round(useIncrement(fromLength, toLength, seconds, cb)));\n};\n\nconst IncrementColor = (from, to, seconds, callback) => {\n  const cb = useCallback(() => callback(), [callback]);\n  const nullcb = useCallback(() => null, []);\n  const fromRGB = hexToRgb(from);\n  const toRGB = hexToRgb(to);\n  const r = Math.round(useIncrement(Math.round(parseInt(fromRGB.r)), Math.round(parseInt(toRGB.r)), seconds, cb));\n  const g = Math.round(useIncrement(Math.round(parseInt(fromRGB.g)), Math.round(parseInt(toRGB.g)), seconds, nullcb));\n  const b = Math.round(useIncrement(Math.round(parseInt(fromRGB.b)), Math.round(parseInt(toRGB.b)), seconds, nullcb));\n  return rgbToHex(r, g, b);\n};\n\nconst useIncrement = (from, to, seconds, callback) => {\n  const cb = useCallback(() => callback(), [callback]);\n  const [transitionValue, setTransitionValue] = useState(from, to);\n  useEffect(() => {\n    if (to != null) {\n      const velocity = getVelocityVector(from, to, seconds);\n      const interval = setInterval(() => {\n        setTransitionValue(transitionValue + velocity / 1000);\n      }, velocity / (to - from) * seconds);\n\n      if (transitionValue <= to && velocity < 0 || transitionValue >= to && velocity > 0) {\n        setTransitionValue(to);\n        clearInterval(interval);\n      }\n\n      return () => {\n        clearInterval(interval);\n      };\n    }\n  }, [seconds, transitionValue, from, to]);\n  useEffect(() => {\n    if (transitionValue === to) {\n      cb();\n    }\n  }, [transitionValue, cb, to]);\n  return transitionValue;\n};\n\nexport const transitionType = (from, to, seconds) => {\n  if (typeof from !== typeof to) {\n    return IS_INCOMPARABLE;\n  }\n\n  switch (typeof from) {\n    case \"number\":\n      return IS_NUMBER;\n\n    case \"string\":\n      if (areColors(from, to)) {\n        return IS_COLOR;\n      }\n\n      return IS_STRING;\n\n    default:\n      return IS_UNKNOWN;\n  }\n};\nexport const areColors = (from, to) => {\n  return typeof from == 'string' && typeof to == 'string' && !from.search(/^#([0-9A-F]{3}){1,2}$/i) && !to.search(/^#([0-9A-F]{3}){1,2}$/i);\n};\nexport const getVelocityVector = (from, to, seconds) => {\n  if (to !== from) {\n    return (to - from) / seconds;\n  }\n\n  return 0;\n};\nexport const hexToRgb = hex => {\n  var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n    return r + r + g + g + b + b;\n  });\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null;\n};\nexport const rgbToHex = (r, g, b) => {\n  return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n};\nexport { useTransition };","map":{"version":3,"sources":["/home/nizar/dev/react/transittogit/transitto/src/lib/useTransition.js"],"names":["useState","useEffect","useCallback","IS_NUMBER","IS_UNKNOWN","IS_INCOMPARABLE","IS_STRING","IS_COLOR","useTransition","from","to","seconds","callback","cb","TransitionFactory","inputType","transitionType","IncrementNumber","IncrementString","IncrementColor","useIncrement","fromLength","length","toLength","substring","Length","Math","round","nullcb","fromRGB","hexToRgb","toRGB","r","parseInt","g","b","rgbToHex","transitionValue","setTransitionValue","velocity","getVelocityVector","interval","setInterval","clearInterval","areColors","search","hex","shorthandRegex","replace","m","result","exec","toString","slice"],"mappings":"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","sourcesContent":["import { useState, useEffect, useCallback } from 'react'\n\nexport const IS_NUMBER = \"IS_NUMBER\";\nexport const IS_UNKNOWN = \"IS_UNKNOWN\";\nexport const IS_INCOMPARABLE = \"IS_INCOMPARABLE\"\nexport const IS_STRING = \"IS_STRING\";\nexport const IS_COLOR = \"IS_COLOR\";\n\nconst useTransition = (from, to, seconds = 1, callback = () => null) => {\n    const cb = useCallback(() => callback(), [callback]);\n    return TransitionFactory(from, to, seconds, cb);\n}\n\nconst TransitionFactory = (from, to, seconds, callback) => {\n    const inputType = transitionType(from, to);\n    const cb = useCallback(() => callback(), [callback]);\n\n    switch (inputType) {\n        case IS_NUMBER:\n            return IncrementNumber(from, to, seconds, cb);\n        case IS_STRING:\n            return IncrementString(from, to, seconds, () => 0);\n        case IS_COLOR:\n            return IncrementColor(from, to, seconds, cb);\n        case IS_UNKNOWN:\n        case IS_INCOMPARABLE:\n        default:\n            return from;\n    }\n}\n\nconst IncrementNumber = (from, to, seconds, callback) => {\n    const cb = useCallback(() => callback(), [callback]);\n    return useIncrement(from, to, seconds, cb);\n}\n\nconst IncrementString = (from, to, seconds, callback) => {\n    const cb = useCallback(() => callback(), [callback]);\n    const fromLength = from.length;\n    const toLength = to.length;\n\n    return to.substring(from.Length, Math.round(useIncrement(fromLength, toLength, seconds, cb)));\n}\n\nconst IncrementColor = (from, to, seconds, callback) => {\n    const cb = useCallback(() => callback(), [callback]);\n    const nullcb = useCallback(() => null, []);\n    const fromRGB = hexToRgb(from);\n    const toRGB = hexToRgb(to);\n\n    const r = Math.round(useIncrement(Math.round(parseInt(fromRGB.r)), Math.round(parseInt(toRGB.r)), seconds, cb));\n    const g = Math.round(useIncrement(Math.round(parseInt(fromRGB.g)), Math.round(parseInt(toRGB.g)), seconds, nullcb));\n    const b = Math.round(useIncrement(Math.round(parseInt(fromRGB.b)), Math.round(parseInt(toRGB.b)), seconds, nullcb));\n    return rgbToHex(r, g, b);\n\n}\n\nconst useIncrement = (from, to, seconds, callback) => {\n\n    const cb = useCallback(() => callback(), [callback]);\n\n    const [transitionValue, setTransitionValue] = useState(from, to);\n\n    useEffect(() => {\n        if (to != null) {\n            const velocity = getVelocityVector(from, to, seconds);\n\n            const interval = setInterval(() => {\n                setTransitionValue(transitionValue + velocity / 1000)\n            }, (velocity / (to - from) * seconds));\n\n            if (\n                (transitionValue <= to && velocity < 0)\n                ||\n                (transitionValue >= to && velocity > 0)\n            ) {\n                setTransitionValue(to);\n                clearInterval(interval);\n            }\n\n            return () => { clearInterval(interval); }\n        }\n\n    }, [seconds, transitionValue, from, to]);\n\n    useEffect(() => {\n        if (transitionValue === to) {\n            cb()\n        }\n    }, [transitionValue, cb, to])\n\n    return transitionValue;\n}\n\nexport const transitionType = (from, to, seconds) => {\n    if (typeof (from) !== typeof (to)) {\n        return IS_INCOMPARABLE;\n    }\n\n    switch (typeof (from)) {\n        case \"number\":\n            return IS_NUMBER;\n        case \"string\":\n            if (areColors(from, to)) {\n                return IS_COLOR;\n            }\n            return IS_STRING;\n        default:\n            return IS_UNKNOWN;\n    }\n}\n\nexport const areColors = (from, to) => {\n    return (typeof (from) == 'string') &&\n        (typeof (to) == 'string') &&\n        !from.search(/^#([0-9A-F]{3}){1,2}$/i) && !to.search(/^#([0-9A-F]{3}){1,2}$/i);\n}\n\nexport const getVelocityVector = (from, to, seconds) => {\n    if (to !== from) {\n        return (to - from) / seconds;\n    }\n    return 0;\n}\n\nexport const hexToRgb = (hex) => {\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n    });\n\n\n\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n    } : null;\n}\n\nexport const rgbToHex = (r, g, b) => {\n    return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n}\n\nexport {\n    useTransition\n}"]},"metadata":{},"sourceType":"module"}